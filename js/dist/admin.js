(()=>{var t={n:s=>{var e=s&&s.__esModule?()=>s.default:()=>s;return t.d(e,{a:e}),e},d:(s,e)=>{for(var a in e)t.o(e,a)&&!t.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:e[a]})},o:(t,s)=>Object.prototype.hasOwnProperty.call(t,s),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},s={};(()=>{"use strict";t.r(s),t.d(s,{components:()=>Q,pages:()=>X});const e=flarum.reg.get("core","admin/app");var a=t.n(e);const n=flarum.reg.get("core","common/extend"),i=flarum.reg.get("core","admin/components/DashboardPage");var o=t.n(i);const r=flarum.reg.get("core","admin/components/DashboardWidget");var l=t.n(r);const d=flarum.reg.get("core","common/components/Button");var h=t.n(d);class c extends(l()){trans(t){return app.translator.trans("vadkuz-flarum2-seo.admin.widget.".concat(t))}oninit(t){super.oninit(t),this.needsReview=!1,void 0===app.data.settings.seo_review_settings&&(this.needsReview=!0),!this.needsReview&&Math.floor(Date.now()/1e3)>app.data.settings.seo_review_settings&&(this.needsReview=!0)}className(){return"SeoWidget "+(this.needsReview?"needs-review":"")}content(){return m("div",null,m("i",{className:"fas fa-check seo-check-icon"})," ",this.trans("review_message"),h().component({className:"",icon:"far fa-thumbs-up",onclick:()=>m.route.set("extension/vadkuz-flarum2-seo")},this.trans("review_action")))}}flarum.reg.add("vadkuz-flarum2-seo","admin/components/SeoWidget",c);const u=flarum.reg.get("core","admin/components/ExtensionPage");var p=t.n(u);const _=flarum.reg.get("core","common/Component");var g=t.n(_);const f=flarum.reg.get("core","common/components/FieldSet");var v=t.n(f);const b=flarum.reg.get("core","admin/utils/saveSettings");var w=t.n(b);const k=flarum.reg.get("core","common/components/Switch");var y=t.n(k);const x=flarum.reg.get("core","common/components/UploadImageButton");var N=t.n(x);const S=flarum.reg.get("core","common/components/Modal");var z=t.n(S);class F extends(z()){oninit(t){super.oninit(t),this.value=void 0!==app.data.settings.seo_post_crawler&&app.data.settings.seo_post_crawler,this.startValue=this.value,this.closeText=this.trans("close"),this.loading=!1,void 0===app.data.settings.seo_reviewed_post_crawler&&this.saveReviewedPostCrawler()}trans(t){return app.translator.trans("vadkuz-flarum2-seo.admin.modals.crawl_post.".concat(t))}title(){return this.trans("title")}content(){return m("div",null,m("div",{className:"Modal-body"},m("div",{className:"Form"},m("b",null,this.trans("intro_title"))," ",this.trans("intro_text"),m("div",{style:"padding: 10px 0;"},m("b",{style:"display: block; padding-bottom: 10px;"},m("span",{style:"display: inline-block; width: 25px;"},m("i",{className:"fas fa-check"})),this.trans("option_default_title")),this.trans("option_default_body")),m("div",{style:"padding: 10px 0;"},m("b",{style:"display: block; padding-bottom: 10px;"},m("span",{style:"display: inline-block; width: 25px;"},m("i",{className:"fas fa-check-double"})),this.trans("option_all_posts_title")),this.trans("option_all_posts_body_before")," ",m("a",{href:"https://discuss.flarum.org/d/21894-friendsofflarum-best-answer",target:"_blank"},this.trans("option_all_posts_best_answer_link"))," ",this.trans("option_all_posts_body_after")))),m("div",{style:"padding: 25px 30px; text-align: center;"},m("b",{style:"display: block; padding-bottom: 10px;"},this.trans("confirm_title")),m("div",{style:"display: inline-block;"},y().component({state:"1"==this.value,onchange:t=>this.change(t)},this.trans("toggle_label")))),m("div",{style:"padding: 25px 30px; text-align: center;"},this.closeDialogButton()))}change(t){this.value=t,this.closeText=this.value!==this.startValue?this.trans("save_changes"):this.trans("close")}closeDialogButton(){return m(h(),{type:"submit",className:"Button Button--primary",loading:this.loading},this.closeText)}onsubmit(){if(this.value===this.startValue)return void this.hide();this.loading=!0;const t={};t.seo_post_crawler=this.value,w()(t).then(this.onsaved.bind(this))}saveReviewedPostCrawler(){this.loading=!0;w()({seo_reviewed_post_crawler:!0}).then((()=>{this.loading=!1,m.redraw()}))}onsaved(){this.hide()}}flarum.reg.add("vadkuz-flarum2-seo","admin/components/Modals/CrawlPostModal",F);class D extends(z()){oninit(t){super.oninit(t),this.value=void 0===app.data.settings.seo_robots_text?"":app.data.settings.seo_robots_text,this.startValue=this.value,this.closeText=this.trans("close"),this.loading=!1}trans(t){return app.translator.trans("vadkuz-flarum2-seo.admin.modals.robots.".concat(t))}title(){return this.trans("title")}content(){return m("div",null,m("div",{className:"Modal-body"},m("textarea",{className:"FormControl",value:this.value,placeholder:this.trans("placeholder"),rows:15,oninput:t=>{this.change(t.target.value)}})),m("div",{style:"padding: 25px 30px; text-align: center;"},this.closeDialogButton()))}change(t){this.value=t,this.closeText=this.value!==this.startValue?this.trans("save_changes"):this.trans("close")}closeDialogButton(){return m(h(),{type:"submit",className:"Button Button--primary",loading:this.loading},this.closeText)}onsubmit(){if(this.value===this.startValue)return void this.hide();this.loading=!0;const t={};t.seo_robots_text=this.value,w()(t).then(this.onsaved.bind(this))}onsaved(){this.hide()}}function B(t){if(""==t)return!0;const s=t.split(",");let e=!0;for(let t of s)if(t.split(" ").length>4){e=!1;break}return e}flarum.reg.add("vadkuz-flarum2-seo","admin/components/Modals/RobotsModal",D),flarum.reg.add("vadkuz-flarum2-seo","admin/utils/countKeywords",B);const P=flarum.reg.get("core","common/utils/Stream");var C=t.n(P);class T extends(z()){oninit(t){super.oninit(t),this.domainDoFollowList=[],this.baseUrl=this.getDomainFromBase(),this.domainDoFollowList=void 0===app.data.settings.seo_dofollow_domains?C()([]):C()(JSON.parse(app.data.settings.seo_dofollow_domains)),this.startValue=this.domainDoFollowList,this.newDomain=C()(""),this.hasChanges=!1,this.loading=!1}trans(t){return app.translator.trans("vadkuz-flarum2-seo.admin.modals.do_follow.".concat(t))}title(){return this.trans("title")}getDomainFromBase(){const t=new URL(app.forum.data.attributes.baseUrl).hostname.split(".");return t.slice(Math.max(t.length-2,0)).join(".")}content(){return m("div",null,m("div",{className:"Modal-body"},m("p",null,this.trans("intro_1")),m("p",null,this.trans("intro_2")),m("p",{style:{marginBottom:"15px"}},m("a",{href:"https://github.com/vadkuz/flarum2-seo",target:"_blank"},this.trans("learn_more_link"))," ",this.trans("learn_more_suffix")),m("div",{className:"FlarumSEO-DoFollowList"},m("input",{type:"text",value:this.baseUrl,readonly:!0,className:"FormControl"}),m(h(),{className:"Button",icon:"fas fa-times",disabled:!0})),this.domainDoFollowList().map(((t,s)=>m("div",{className:"FlarumSEO-DoFollowList"},m("input",{type:"text",value:t,onkeyup:t=>this.updateDomain(s,t.target.value),className:"FormControl"}),m(h(),{className:"Button",icon:"fas fa-times",onclick:()=>this.removeDomain(s)})))),m("div",{className:"FlarumSEO-DoFollowList"},m("input",{type:"text",bidi:this.newDomain,placeholder:this.trans("new_domain_placeholder"),onkeydown:t=>{13===t.keyCode&&""!==this.newDomain()&&(t.preventDefault(),this.addDomain())},className:"FormControl"}),m(h(),{className:"Button ".concat(""!==this.newDomain()?"Button--primary":""),icon:"fas fa-plus",onclick:this.addDomain.bind(this)}))),m("div",{style:"padding: 25px 30px; text-align: center;"},m(h(),{type:"submit",className:"Button Button--primary",loading:this.loading},this.hasChanges?this.trans("save_changes"):this.trans("close"))))}addDomain(){if(this.domainDoFollowList().indexOf(this.newDomain())>=0)return alert(this.trans("duplicate_domain_alert")),void this.newDomain("");const t=[...this.domainDoFollowList()];t.push(this.newDomain()),this.domainDoFollowList(t),this.newDomain(""),this.hasChanges=!0}removeDomain(t){const s=[...this.domainDoFollowList()];s.splice(t,1),this.domainDoFollowList(s),this.hasChanges=!0}updateDomain(t,s){const e=[...this.domainDoFollowList()];e[t]=s,this.domainDoFollowList(e),this.hasChanges=!0}onsubmit(){if(!this.hasChanges)return void this.hide();this.loading=!0;const t={};t.seo_dofollow_domains=JSON.stringify(this.domainDoFollowList().filter((t=>""!==t))),w()(t).then(this.onsaved.bind(this))}onsaved(){this.hide()}}flarum.reg.add("vadkuz-flarum2-seo","admin/components/Modals/DoFollowListModal",T);const L=flarum.reg.get("core","common/components/Select");var M=t.n(L);const E=flarum.reg.get("core","common/utils/ItemList");var O=t.n(E);class U extends(g()){oninit(t){super.oninit(t),this.saving=!1,this.fields=["forum_title","forum_description","forum_keywords","seo_allow_all_bots","seo_twitter_card_size"],this.values={};const s=app.data.settings;this.fields.forEach((t=>this.values[t]=C()(s[t]||""))),this.allowBotsValue="0"!==s.seo_allow_all_bots,app.forum.data.attributes.seo_social_media_imageUrl=app.data.settings.seo_social_media_image_url,this.showField="all",void 0!==m.route.param("setting")&&(this.showField=m.route.param("setting"))}trans(t,s){return void 0===s&&(s={}),app.translator.trans("vadkuz-flarum2-seo.admin.settings.".concat(t),s)}view(){return m("div",null,this.infoText(),m("form",{onsubmit:this.onsubmit.bind(this),className:"BasicsPage"},this.viewItems().toArray()))}viewItems(){const t=new(O());return t.add("description",v().component({label:app.translator.trans("core.admin.basics.forum_description_heading"),className:"all"!==this.showField&&"description"!==this.showField?"hidden":""},[m("div",{className:"helpText"},app.translator.trans("core.admin.basics.forum_description_text")),m("textarea",{className:"FormControl",bidi:this.values.forum_description}),"description"===this.showField&&h().component({type:"submit",className:"Button Button--primary",loading:this.saving,disabled:!this.changed()},app.translator.trans("core.admin.settings.submit_button"))]),100),t.add("keywords",v().component({label:this.trans("forum_keywords_label"),className:"all"!==this.showField&&"keywords"!==this.showField?"hidden":""},[m("div",{className:"helpText"},this.trans("forum_keywords_help")),m("textarea",{className:"FormControl",bidi:this.values.forum_keywords,placeholder:this.trans("forum_keywords_placeholder")}),m("div",{className:"helpText",style:{color:0==B(this.values.forum_keywords())?"red":null}},m("b",null,this.trans("forum_keywords_note"))," ",this.trans("forum_keywords_example_prefix")," ",m("i",null,this.trans("forum_keywords_example_values"))),"keywords"===this.showField&&h().component({type:"submit",className:"Button Button--primary",loading:this.saving,disabled:!this.changed()},app.translator.trans("core.admin.settings.submit_button"))]),90),t.add("twitterCardSize",v().component({label:this.trans("twitter_card_size_label"),className:"all"!==this.showField?"hidden":""},[m("div",{className:"helpText"},this.trans("twitter_card_size_help")),M().component({options:{large:this.trans("twitter_card_size_option_large"),summary:this.trans("twitter_card_size_option_summary")},value:this.values.seo_twitter_card_size()||"large",onchange:t=>{this.values.seo_twitter_card_size(t),this.hasChanges=!0}}),h().component({type:"submit",className:"Button Button--primary",loading:this.saving,disabled:!this.changed()},app.translator.trans("core.admin.settings.submit_button"))]),70),t.add("socialMediaImage",v().component({label:this.trans("social_media_image_label"),className:"social-media-uploader "+("all"!==this.showField&&"social-media"!==this.showField?"hidden":"")},[m("div",{className:"helpText"},this.trans("social_media_image_help")),N().component({name:"seo_social_media_image"})]),60),t.add("crawlSettings",v().component({label:this.trans("discussion_post_crawl_label"),className:"all"!==this.showField&&"discussion-post"!==this.showField?"hidden":""},[m("div",{className:"helpText"},this.trans("discussion_post_crawl_help")),h().component({className:"Button",onclick:()=>app.modal.show(F)},this.trans("discussion_post_crawl_action"))]),50),t.add("noFollowLink",v().component({label:this.trans("nofollow_links_label"),className:"all"!==this.showField?"hidden":""},[m("div",{className:"helpText"},this.trans("nofollow_links_help_1")),m("div",{className:"helpText"},this.trans("nofollow_links_help_2_before")," ",m("a",{href:"https://github.com/vadkuz/flarum2-seo",target:"_blank"},this.trans("learn_more")),"."),m("div",{style:"height: 5px;"}),m("div",null,h().component({className:"Button",loading:this.saving,onclick:()=>app.modal.show(T)},this.trans("nofollow_links_action")))]),40),t.add("linkTarget",v().component({label:this.trans("open_external_in_new_tab_label"),className:"all"!==this.showField?"hidden":""},[m("div",{className:"helpText"},this.trans("open_external_in_new_tab_help"))]),30),t.add("robots",v().component({label:this.trans("robots_label"),className:"all"!==this.showField&&"robots"!==this.showField?"hidden":""},[m("div",{className:"helpText"},this.trans("robots_help_before")," ",m("a",{href:"https://discuss.flarum.org/d/14941-fof-sitemap",target:"_blank"},this.trans("robots_help_sitemap_link"))," ",this.trans("robots_help_after")),m("div",{style:"height: 5px;"}),y().component({state:this.allowBotsValue,onchange:t=>this.saveAllowBots(t)},this.trans("robots_allow_all_bots")),m("div",{style:"height: 5px;"}),m("div",null,h().component({className:"Button",loading:this.saving,onclick:()=>app.modal.show(D)},this.trans("robots_edit_action"))," ",m("a",{href:app.forum.attribute("baseUrl")+"/robots.txt",target:"_blank",className:"robots-link"},this.trans("robots_open_link")," ",m("i",{className:"fas fa-external-link-alt"})))]),20),t.add("updated",v().component({label:this.trans("updated_setting_label"),className:"all"===this.showField?"hidden":""},[m("div",{className:"helpText"},this.trans("updated_setting_help")),h().component({className:"Button",icon:"fas fa-sync",loading:this.saving,onclick:()=>m.route.set(app.route("extension",{id:"vadkuz-flarum2-seo"}))},this.trans("updated_setting_action"))]),10),t}infoText(){if("all"===this.showField)return m("div",null,m("p",null,this.trans("info_1")),m("p",null,this.trans("info_2")))}changed(){return this.fields.some((t=>this.values[t]()!==app.data.settings[t]))}onsubmit(t){if(t.preventDefault(),this.saving)return;this.saving=!0,app.alerts.dismiss(this.successAlert);const s={};this.fields.forEach((t=>s[t]=this.values[t]())),""===s.seo_twitter_card_size&&(s.seo_twitter_card_size="large"),w()(s).then((()=>app.alerts.show({type:"success"},app.translator.trans("core.admin.settings.saved_message")))).catch((()=>{})).then((()=>{this.saving=!1,m.redraw()}))}saveAllowBots(t){if(this.saving)return;this.saving=!0,this.allowBotsValue=t;const s={};s.seo_allow_all_bots=t,w()(s).then((()=>app.alerts.show({type:"success"},app.translator.trans("core.admin.settings.saved_message")))).catch((()=>{})).then((()=>{this.saving=!1,m.redraw()}))}}flarum.reg.add("vadkuz-flarum2-seo","admin/components/Forms/SeoSettings",U);const R=flarum.reg.get("core","common/components/Page");var A=t.n(R);class V extends(A()){oninit(t){super.oninit(t),this.settings=app.data.settings,this.saving=!1}trans(t,s){return void 0===s&&(s={}),app.translator.trans("vadkuz-flarum2-seo.admin.health.".concat(t),s)}view(){return m("div",null,m("p",{className:"seo-intro"},this.trans("intro_1_before")," ",m("a",{href:"https://discuss.flarum.org/d/18316-flarum-seo",target:"_blank"},this.trans("intro_1_forum_link")," ",m("i",{className:"fas fa-external-link-alt"})),this.trans("intro_1_between")," ",m("a",{href:"https://github.com/vadkuz/flarum2-seo/issues",target:"_blank"},this.trans("intro_1_issue_link")," ",m("i",{className:"fas fa-external-link-alt"})),"."),m("p",{className:"seo-intro"},this.trans("intro_2_before")," ",m("a",{href:"https://github.com/vadkuz/flarum2-seo",target:"_blank"},this.trans("intro_2_github_link")," ",m("i",{className:"fas fa-external-link-alt"})),". ",this.trans("intro_2_between")," ",m("a",{href:"https://github.com/vadkuz/flarum2-seo",target:"_blank"},this.trans("intro_2_docs_link")," ",m("i",{className:"fas fa-external-link-alt"})),"."),m("p",{className:"seo-intro"},this.trans("intro_3")),m("table",{className:"seo-check-table"},m("thead",null,m("tr",null,m("td",null,this.trans("table.technique")),m("td",{width:"150"},this.trans("table.status")))),m("tbody",null,this.forumDescription(),this.forumKeywords(),this.siteUsesSSL(),this.discussionPostSet(),this.socialMediaImage(),this.hasSitemap(),this.registeredSearchEngines(),this.robotsTxt(),this.tagsAvailable(),this.reviewAgain())))}forumDescription(){let t=void 0!==this.settings.forum_description&&""!==this.settings.forum_description||"must",s=this.trans("checks.forum_description.reason_missing");return!0===t&&this.settings.forum_description.length<=20&&(t=!1,s=this.trans("checks.forum_description.reason_short")),!0===t&&this.settings.forum_description.indexOf("This is beta software")>=0&&(t="must",s=this.trans("checks.forum_description.reason_default")),m("tr",null,m("td",null,this.trans("checks.forum_description.title"),this.notPassedError(t,s,this.trans("actions.update_description"),this.getSettingUrl("description"))),this.passed(t))}forumKeywords(){const t=void 0!==this.settings.forum_keywords&&""!==this.settings.forum_keywords,s=this.trans("checks.forum_keywords.reason_missing");return m("tr",null,m("td",null,this.trans("checks.forum_keywords.title"),this.notPassedError(t,s,this.trans("actions.update_keywords"),this.getSettingUrl("keywords"))),this.passed(t))}siteUsesSSL(){const t=app.forum.attribute("baseUrl").indexOf("https://")>=0||"must";return m("tr",null,m("td",null,this.trans("checks.ssl.title"),this.notPassedError(t,this.trans("checks.ssl.reason_missing"),this.trans("actions.setup_ssl"),app.route("extension",{id:"vadkuz-flarum2-seo",page:"ssl"}))),this.passed(t))}discussionPostSet(){const t=void 0!==this.settings.seo_reviewed_post_crawler;return m("tr",null,m("td",null,this.trans("checks.discussion_posts.title"),this.notPassedError(t,this.trans("checks.discussion_posts.reason_missing"),this.trans("actions.review_post_settings"),this.getSettingUrl("discussion-post"))),this.passed(t))}socialMediaImage(){let t=!0;return void 0!==this.settings.seo_social_media_image_path&&null!==this.settings.seo_social_media_image_path||(t=!1),m("tr",null,m("td",null,this.trans("checks.social_image.title"),this.notPassedError(t,this.trans("checks.social_image.reason_missing"),this.trans("actions.update_image"),this.getSettingUrl("social-media"))),this.passed(t))}hasSitemap(){let t=!0;return-1===app.data.settings.extensions_enabled.indexOf("flagrow-sitemap")&&-1===app.data.settings.extensions_enabled.indexOf("fof-sitemap")&&(t=!1),m("tr",null,m("td",null,this.trans("checks.sitemap.title"),this.notPassedError(t,this.trans("checks.sitemap.reason_missing"),this.trans("actions.read_sitemap"),app.route("extension",{id:"vadkuz-flarum2-seo",page:"sitemap"}))),this.passed(t))}robotsTxt(){return m("tr",null,m("td",null,this.trans("checks.robots.title_before")," ",m("a",{href:app.forum.attribute("baseUrl")+"/robots.txt",target:"_blank",className:"robots-link"},this.trans("checks.robots.open_link")," ",m("i",{className:"fas fa-external-link-alt"}))),this.passed(!0))}tagsAvailable(){return m("tr",null,m("td",null,this.trans("checks.meta_tags.title")),this.passed(!0))}registeredSearchEngines(){const t=void 0!==this.settings.seo_reviewed_search_engines;return m("tr",null,m("td",null,this.trans("checks.search_engines.title"),this.notPassedError(t,this.trans("checks.search_engines.reason_missing"),this.trans("actions.more_info"),app.route("extension",{id:"vadkuz-flarum2-seo",page:"search-engines"}))),this.passed(t))}reviewAgain(){let t=!0,s=new Date;return void 0===app.data.settings.seo_review_settings?t=!1:s=new Date(1e3*app.data.settings.seo_review_settings),t&&Math.floor(Date.now()/1e3)>app.data.settings.seo_review_settings&&(t=!1),m("tr",null,m("td",null,this.trans("checks.review_again.title",{date:s.toDateString()}),this.notPassedError(t,this.trans("checks.review_again.reason_missing"),this.trans("actions.reviewed"),(()=>{const t=new Date,s=Math.floor(new Date(t.getFullYear(),t.getMonth()+2,1)/1e3);this.saveSingleSetting("seo_review_settings",s)}))),this.passed(t))}getSettingUrl(t){return void 0===t&&(t=""),""===t?app.route("extension",{id:"vadkuz-flarum2-seo"}):app.route("extension",{id:"vadkuz-flarum2-seo",page:"settings",setting:t})}passed(t){return"must"!==t&&t?m("td",{className:"row-passed"},m("i",{class:"fas fa-check"})," ",this.trans("status.all_set")):m("td",{className:"must"===t?"row-must":"row-warning"},m("i",{class:"fas fa-exclamation-circle"})," ",this.trans("status.warning"))}notPassedError(t,s,e,a){if(void 0===e&&(e=null),void 0===a&&(a=app.route("seoSettings")),!0!==t)return m("div",{className:"row-not-passed-error"},s,m("div",{className:"button-container"},h().component({className:"Button",onclick:()=>{"string"==typeof a?m.route.set(a):a()}},e||this.trans("actions.update_setting"))))}saveSingleSetting(t,s){if(this.saving)return;this.saving=!0;const e={};e[t]=s,w()(e).then((()=>{app.alerts.show({type:"success"},app.translator.trans("core.admin.settings.saved_message"))})).catch((()=>{})).then((()=>{this.saving=!1,m.redraw()}))}}flarum.reg.add("vadkuz-flarum2-seo","admin/Pages/HealthCheck",V);class I extends(A()){oninit(t){super.oninit(t),this.saving=!1,this.hasConfirmed="1"===app.data.settings.seo_reviewed_search_engines}trans(t){return app.translator.trans("vadkuz-flarum2-seo.admin.search_engines.".concat(t))}view(){return m("div",null,m("h2",null,this.trans("title")),m("p",null,this.trans("intro_1")),m("p",null,this.trans("intro_2_before")," ",m("a",{href:"#/seo/sitemap"},this.trans("intro_2_link")),"."),m("div",null,m("h4",null,this.trans("google_title")),m("p",null,this.trans("google_body_1_before")," ",m("a",{href:"https://search.google.com/search-console",target:"_blank"},this.trans("google_link")," ",m("i",{className:"fas fa-external-link-alt"})),". ",this.trans("google_body_1_after")),m("p",null,this.trans("google_body_2")),m("p",null,this.trans("google_body_3"))),m("div",null,m("h4",null,this.trans("bing_title")),m("p",null,this.trans("bing_body_1_before")," ",m("a",{href:"https://www.bing.com/toolbox/webmaster",target:"_blank"},this.trans("bing_link")," ",m("i",{className:"fas fa-external-link-alt"}))," ",this.trans("bing_body_1_after")),m("p",null,this.trans("bing_body_2"))),m("div",null,m("h4",null,this.trans("yandex_title")),m("p",null,this.trans("yandex_body_1_before")," ",m("a",{href:"https://webmaster.yandex.com",target:"_blank"},this.trans("yandex_link")," ",m("i",{className:"fas fa-external-link-alt"}))," ",this.trans("yandex_body_1_after")),m("p",null,this.trans("yandex_body_2"))),m("div",null,m("h4",null,this.trans("yahoo_title")),m("p",null,this.trans("yahoo_body"))),m("div",{className:"clear"}),h().component({className:"Button pull-right "+(this.hasConfirmed?"hidden":""),onclick:()=>this.confirm(),icon:"fas fa-check",loading:this.saving},this.trans("confirm_button")))}confirm(){this.saveSingleSetting("seo_reviewed_search_engines",!0)}saveSingleSetting(t,s){if(this.saving)return;this.saving=!0;const e={};e[t]=s,w()(e).then((()=>{this.hasConfirmed=!0,app.alerts.show({type:"success"},app.translator.trans("core.admin.settings.saved_message"))})).catch((()=>{})).then((()=>{this.saving=!1,m.redraw()}))}}flarum.reg.add("vadkuz-flarum2-seo","admin/Pages/RegisterToSearchEngines",I);class j extends(A()){trans(t){return app.translator.trans("vadkuz-flarum2-seo.admin.ssl.".concat(t))}view(){return m("div",null,m("h2",null,this.trans("title")),m("p",null,this.trans("intro")),m("h4",null,this.trans("search_engines_title")," ",m("i",{className:"fas fa-heart"})),m("p",null,this.trans("search_engines_body_1")),m("p",null,this.trans("search_engines_body_2")),m("h4",null,this.trans("what_is_title")),m("p",null,this.trans("what_is_body")),m("h4",null,this.trans("how_to_add_title")),m("p",null,this.trans("how_to_add_body_before")," ",m("a",{href:"https://letsencrypt.org/",target:"_blank"},this.trans("lets_encrypt_link")," ",m("i",{className:"fas fa-external-link-alt"})),"."),m("h4",null,this.trans("done_title")),m("p",null,this.trans("done_body")),m("h4",null,this.trans("without_ssl_title")),m("p",null,this.trans("without_ssl_body")))}}flarum.reg.add("vadkuz-flarum2-seo","admin/Pages/SSLPage",j);class W extends(A()){trans(t){return app.translator.trans("vadkuz-flarum2-seo.admin.sitemap.".concat(t))}view(){return m("div",null,m("h2",null,this.trans("title")),m("p",null,this.trans("intro_1")),m("p",null,this.trans("intro_2")),m("h4",null,this.trans("extension_title")),m("p",null,this.trans("extension_body_before")," ",m("a",{href:"https://discuss.flarum.org/d/14941-fof-sitemap",target:"_blank"},this.trans("extension_link")," ",m("i",{className:"fas fa-external-link-alt"}))," ",this.trans("extension_body_after")),m("p",null,this.trans("coverage_body")),m("h4",null,this.trans("installed_title")),m("p",null,this.trans("installed_body")))}}flarum.reg.add("vadkuz-flarum2-seo","admin/Pages/Sitemap",W);class H extends(p()){trans(t){return app.translator.trans("vadkuz-flarum2-seo.admin.menu.".concat(t))}content(){const t=m.route.param().page||"health";return m("div",{className:"ExtensionPage-settings FlarumSEO"},m("div",{className:"seo-menu"},m("div",{className:"container"},this.menuButtons(t))),m("div",{className:"container FlarumSeoPage-container"},this.pageContent(t)))}menuButtons(t){return[h().component({className:"Button ".concat("health"===t?"item-selected":""),onclick:()=>m.route.set(app.route("extension",{id:"vadkuz-flarum2-seo"})),icon:"fas fa-heartbeat"},this.trans("health_check")),h().component({className:"Button ".concat("settings"===t?"item-selected":""),onclick:()=>m.route.set(app.route("extension",{id:"vadkuz-flarum2-seo",page:"settings"})),icon:"fas fa-cogs"},this.trans("seo_settings")),h().component({className:"Button ".concat("sitemap"===t?"item-selected":""),onclick:()=>m.route.set(app.route("extension",{id:"vadkuz-flarum2-seo",page:"sitemap"})),icon:"fas fa-sitemap"},this.trans("sitemap_information")),h().component({className:"Button ".concat("search-engines"===t?"item-selected":""),onclick:()=>m.route.set(app.route("extension",{id:"vadkuz-flarum2-seo",page:"search-engines"})),icon:"fas fa-search"},this.trans("search_engine_information")),h().component({className:"Button ".concat("ssl"===t?"item-selected":""),onclick:()=>m.route.set(app.route("extension",{id:"vadkuz-flarum2-seo",page:"ssl"})),icon:"fas fa-shield-alt"},this.trans("set_up_ssl"))]}pageContent(t){return"search-engines"===t?m(I,null):"settings"===t?m(U,null):"ssl"===t?m(j,null):"sitemap"===t?m(W,null):m(V,null)}}flarum.reg.add("vadkuz-flarum2-seo","admin/Pages/SettingsPage",H);const K=flarum.reg.get("core","admin/components/PermissionGrid");var J=t.n(K);const q=flarum.reg.get("core","common/components/Dropdown");var G=t.n(q);class Y extends(g()){trans(t){return app.translator.trans("vadkuz-flarum2-seo.admin.header.".concat(t))}view(){return m("div",{className:"seo-header container"},m("div",{className:"pull-right"},G().component({label:this.trans("tools"),icon:"fas fa-cog",buttonClassName:"Button",menuClassName:"Dropdown-menu--right"},[h().component({className:"Button",onclick:()=>m.route.set(app.route("seo")),icon:"fas fa-heartbeat"},this.trans("health_check")),h().component({className:"Button",onclick:()=>m.route.set(app.route("seoSettings")),icon:"fas fa-cogs"},this.trans("seo_settings")),h().component({className:"Button",onclick:()=>m.route.set(app.route("seoSitemap")),icon:"fas fa-sitemap"},this.trans("sitemap_information")),h().component({className:"Button",onclick:()=>m.route.set(app.route("seoSearchEngines")),icon:"fas fa-search"},this.trans("search_engine_information")),h().component({className:"Button",onclick:()=>m.route.set(app.route("seoSSL")),icon:"fas fa-shield-alt"},this.trans("set_up_ssl"))])),m("h2",null,this.trans("title")),m("div",{className:"clear"}))}}flarum.reg.add("vadkuz-flarum2-seo","admin/components/Header",Y);const Q={SeoSettings:U,CrawlPostModal:F,DoFollowListModal:T,RobotsModal:D,Header:Y,SeoWidget:c};flarum.reg.add("vadkuz-flarum2-seo","admin/components",null);const X={HealthCheck:V,RegisterToSearchEngines:I,SettingsPage:H,Sitemap:W,SSLPage:j};flarum.reg.add("vadkuz-flarum2-seo","admin/Pages",null),a().initializers.add("vadkuz-flarum2-seo",(()=>{a().registry.for("vadkuz-flarum2-seo").registerPage(H),(0,n.extend)(o().prototype,"availableWidgets",(t=>{t.add("seo-widget",m(c,null),500)})),a().registry.for("vadkuz-flarum2-seo").registerPermission({icon:"fas fa-search",label:a().translator.trans("vadkuz-flarum2-seo.admin.permissions.configure_seo"),permission:"seo.canConfigure"},"seo",90),(0,n.extend)(J().prototype,"permissionItems",(function(t){var s,e,n,i;const o=null==(s=this.attrs)?void 0:s.extensionId,r=o?null!=(e=null==(n=a().registry.getExtensionPermissions(o,"seo"))||null==(i=n.toArray)?void 0:i.call(n))?e:[]:a().registry.getAllPermissions("seo").toArray();t.add("seo",{label:a().translator.trans("vadkuz-flarum2-seo.admin.permissions.group_label"),children:r},80)}))}))})(),module.exports=s})();
//# sourceMappingURL=admin.js.map