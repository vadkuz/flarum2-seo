{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@vadkuz/flarum2-seo/webpack/bootstrap","webpack://@vadkuz/flarum2-seo/webpack/runtime/compat get default export","webpack://@vadkuz/flarum2-seo/webpack/runtime/define property getters","webpack://@vadkuz/flarum2-seo/webpack/runtime/hasOwnProperty shorthand","webpack://@vadkuz/flarum2-seo/webpack/runtime/make namespace object","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'forum/app')\"","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'forum/utils/DiscussionControls')\"","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/extend')\"","webpack://@vadkuz/flarum2-seo/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@vadkuz/flarum2-seo/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@vadkuz/flarum2-seo/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@vadkuz/flarum2-seo/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/components/Modal')\"","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/components/Switch')\"","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/components/Alert')\"","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@vadkuz/flarum2-seo/./src/admin/utils/countKeywords.js","webpack://@vadkuz/flarum2-seo/./node_modules/clsx/dist/clsx.mjs","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/components/FieldSet')\"","webpack://@vadkuz/flarum2-seo/./src/common/Components/MetaSeoModal.js","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/utils/mixin')\"","webpack://@vadkuz/flarum2-seo/./src/common/Models/SeoMeta.js","webpack://@vadkuz/flarum2-seo/external root \"flarum.reg.get('core', 'common/models/Discussion')\"","webpack://@vadkuz/flarum2-seo/./src/common/extend.ts","webpack://@vadkuz/flarum2-seo/./src/forum/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'forum/utils/DiscussionControls');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extend');","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Modal');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Switch');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/Stream');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Alert');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LoadingIndicator');","/**\n * Check if the keywords field is filled in correctly\n * \n * @param string _keywords \n */\nexport default function countKeywords(_keywords) {\n  // No keywords set up yet\n  if (_keywords == \"\") return true;\n\n  // Split all commas\n  const keywords = _keywords.split(\",\");\n  let status_ok = true;\n\n  // Go through all keywords\n  for (let keyword of keywords) {\n    // Keywords shouldn't have more then three spaces\n    if (keyword.split(\" \").length > 4) {\n      status_ok = false;\n      break;\n    }\n  }\n  ;\n\n  // Seems allright\n  return status_ok;\n}\nflarum.reg.add('vadkuz-flarum2-seo', 'admin/utils/countKeywords', countKeywords);","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/FieldSet');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport Modal from \"flarum/common/components/Modal\";\nimport Button from \"flarum/common/components/Button\";\nimport Switch from \"flarum/common/components/Switch\";\nimport Stream from \"flarum/common/utils/Stream\";\nimport Alert from \"flarum/common/components/Alert\";\nimport LoadingIndicator from \"flarum/common/components/LoadingIndicator\";\nimport FieldSet from \"flarum/common/components/FieldSet\";\nimport countKeywords from \"../../admin/utils/countKeywords\";\nimport clsx from \"clsx\";\nexport default class MetaSeoModal extends Modal {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"initialized\", true);\n    _defineProperty(this, \"initialLoading\", false);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    // Open dialog\n    if (this.attrs.object) {\n      // Get SeoMeta relationship\n      if (!this.attrs.object.seoMeta) {\n        this.initialized = false;\n        app.alerts.show(Alert, {\n          type: \"error\",\n          title: \"This object is not a supported SeoMeta object\",\n          controls: [m(\"a\", {\n            class: \"Button Button--link\",\n            href: \"https://github.com/vadkuz/flarum2-seo\",\n            target: \"_blank\"\n          }, \"Documentation\")]\n        }, \"Please open this dialog using the objectType and objectId properties or register the object relationship instead.\");\n        setTimeout(() => {\n          this.hide();\n        }, 100);\n        return;\n      }\n      this.meta = this.attrs.object.seoMeta();\n    } else {\n      this.initializeLoad();\n    }\n    this.hasChanges = false;\n    this.closeText = \"Close\";\n    this.closeInfoText = null;\n    this.loading = false;\n    this.enableCustomTwitter = false;\n    this.enableCustomOpenGraph = false;\n    this.wasManaged = true;\n    this.seoTagsOpened = false;\n\n    // Define options\n    this.initializeData();\n  }\n  initializeData() {\n    if (!this.meta) return;\n    this.autoUpdateData = Stream(this.meta.autoUpdateData());\n    this.wasManaged = this.meta.autoUpdateData() === true;\n    this.metaTitle = Stream(this.meta.title());\n    this.description = Stream(this.meta.description());\n    this.keywords = Stream(this.meta.keywords());\n    this.robotsNoindex = Stream(this.meta.robotsNoindex());\n    this.robotsNofollow = Stream(this.meta.robotsNofollow());\n    this.robotsNoarchive = Stream(this.meta.robotsNoarchive());\n    this.robotsNoimageindex = Stream(this.meta.robotsNoimageindex());\n    this.robotsNosnippet = Stream(this.meta.robotsNosnippet());\n    this.twitterTitle = Stream(this.meta.twitterTitle());\n    this.twitterDescription = Stream(this.meta.twitterDescription());\n    this.twitterImage = Stream(this.meta.twitterImage());\n    this.twitterImageSource = Stream(this.meta.twitterImageSource());\n    this.openGraphTitle = Stream(this.meta.openGraphTitle());\n    this.openGraphDescription = Stream(this.meta.openGraphDescription());\n    this.openGraphImage = Stream(this.meta.openGraphImage());\n    this.openGraphImageSource = Stream(this.meta.openGraphImageSource());\n    this.estimatedReadingTime = Stream(this.meta.estimatedReadingTime());\n    this.createdAt = Stream(this.meta.createdAt());\n    this.updatedAt = Stream(this.meta.updatedAt());\n    this.enableCustomTwitter = this.twitterTitle() !== null || this.twitterDescription() !== null || this.twitterImageSource() !== \"auto\" ? true : false;\n    this.enableCustomOpenGraph = this.openGraphTitle() !== null || this.openGraphDescription() !== null ? true : false;\n  }\n  title() {\n    return \"SEO settings - Meta\";\n  }\n  className() {\n    return \"Modal Modal-SEO-settings\";\n  }\n  initializeLoad() {\n    this.initialLoading = true;\n    app.store.find(\"seo_meta\", \"\".concat(this.attrs.objectType, \"-\").concat(this.attrs.objectId)).then(data => {\n      this.isLoading = false;\n      this.meta = data;\n      this.initialLoading = false;\n      this.initializeData();\n    }).then(() => {\n      m.redraw();\n    });\n  }\n  content() {\n    var _this$keywords, _this$openGraphImage;\n    // Hide due to invalid relationship or loading data\n    if (!this.initialized || this.initialLoading) {\n      return m(\"div\", null, LoadingIndicator.component({}));\n    }\n    return m(\"div\", null, m(\"div\", {\n      className: \"Modal-body\",\n      onkeyup: () => this.updateHasChanges()\n    }, m(\"div\", {\n      className: \"Form\"\n    }, m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Auto update meta tags\"), m(\"div\", {\n      className: \"helpText\"\n    }, \"When enabled, this items meta tags are automatically updated when the object changes.\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, Switch.component({\n      state: this.autoUpdateData(),\n      onchange: value => {\n        this.autoUpdateData(value);\n        this.updateHasChanges();\n      }\n    }, \"Update object SEO on change\")))), m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Meta title\"), m(\"div\", {\n      className: \"helpText\"\n    }, \"Title in search engines.\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, m(\"input\", {\n      className: \"FormControl\",\n      bidi: this.metaTitle,\n      placeholder: \"Enter page title\",\n      disabled: this.autoUpdateData()\n    }), this.autoUpdateData() && m(\"div\", {\n      className: \"ManagedText\"\n    }, m(\"i\", {\n      className: \"fas fa-check\"\n    }), \" Managed\")))), m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \" Meta description\"), m(\"div\", {\n      className: \"helpText\"\n    }, \"Describes the item and shown in search engines.\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, m(\"textarea\", {\n      className: \"FormControl\",\n      bidi: this.description,\n      placeholder: \"Add a few keywords\",\n      disabled: this.autoUpdateData()\n    }), this.autoUpdateData() && m(\"div\", {\n      className: \"ManagedText\"\n    }, m(\"i\", {\n      className: \"fas fa-check\"\n    }), \" Managed\")))), m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Keywords\"), m(\"div\", {\n      className: \"helpText\"\n    }, \"Enter one or more keywords that describes this item.\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"textarea\", {\n      className: \"FormControl\",\n      bidi: this.keywords,\n      placeholder: \"Add a few keywords\"\n    }), m(\"div\", {\n      className: clsx(\"SeoItemContent-helpertext\", countKeywords((_this$keywords = this.keywords()) != null ? _this$keywords : \"\") == false && \"invalid\")\n    }, m(\"b\", null, \"Note: Separate keywords with a comma.\"), \" Example:\", \" \", m(\"i\", null, \"flarum, web development, forum, apples, security\")))), m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Meta image\"), m(\"div\", {\n      className: \"helpText\"\n    }, \"Displays an image.\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, m(\"input\", {\n      className: \"FormControl\",\n      bidi: this.openGraphImage,\n      placeholder: \"Enter image URL\",\n      disabled: this.autoUpdateData() && this.openGraphImageSource() === \"auto\"\n    }), this.autoUpdateData() && this.openGraphImageSource() !== \"custom\" && m(\"div\", {\n      className: \"ManagedText\"\n    }, m(\"i\", {\n      className: \"fas fa-check\"\n    }), \" Managed\"), !this.autoUpdateData() && this.returnFoFUploadButton(fileUrl => {\n      this.openGraphImage(fileUrl);\n      this.openGraphImageSource(\"fof-upload\");\n    }), this.openGraphImageSource() !== \"auto\" && this.openGraphImageSource() !== \"custom\" && m(\"div\", {\n      className: \"SeoItemContent-helpertext\"\n    }, \"Image source managed by \", this.openGraphImageSource())))), m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Robots\"), m(\"div\", {\n      className: \"helpText\"\n    }, \"Robot-crawling settings for this item.\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      class: clsx(\"SeoTags-dropdown-container\", this.seoTagsOpened && \"SeoTags-dropdown-open\")\n    }, m(\"div\", {\n      className: \"SeoTags\",\n      onclick: () => this.seoTagsOpened = !this.seoTagsOpened\n    }, this.returnTag(!this.robotsNoindex(), \"Allow indexing page\", \"Page indexing not allowed\"), this.returnTag(!this.robotsNofollow(), \"Allow follow links\", \"Link following not allowed\"), this.robotsNoarchive() && this.returnTag(false, \"\", \"Archiving pages not allowed\"), this.robotsNoimageindex() && this.returnTag(false, \"\", \"Image indexing not allowed\"), this.robotsNosnippet() && this.returnTag(false, \"\", \"Taking text-snippets not allowed\")), m(\"div\", {\n      className: \"SeoTags-dropdown\"\n    }, Switch.component({\n      state: !this.robotsNoindex(),\n      onchange: value => {\n        this.robotsNoindex(!value);\n        this.updateHasChanges();\n      }\n    }, \"Allow indexing page\"), Switch.component({\n      state: !this.robotsNofollow(),\n      onchange: value => {\n        this.robotsNofollow(!value);\n        this.updateHasChanges();\n      }\n    }, \"Allow following links to different pages\"), Switch.component({\n      state: this.robotsNoarchive(),\n      onchange: value => {\n        this.robotsNoarchive(value);\n        this.updateHasChanges();\n      }\n    }, \"Disable archiving page (noarchive)\"), Switch.component({\n      state: this.robotsNoimageindex(),\n      onchange: value => {\n        this.robotsNoimageindex(value);\n        this.updateHasChanges();\n      }\n    }, \"Disable indexing images on this page (noimageindex)\"), Switch.component({\n      state: this.robotsNosnippet(),\n      onchange: value => {\n        this.robotsNosnippet(value);\n        this.updateHasChanges();\n      }\n    }, \"Disable text-snippes on page (nosnippet)\"))))), m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Estimated reading time\"), m(\"div\", {\n      className: \"helpText\"\n    }, \"Estimated reading time in seconds.\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, m(\"input\", {\n      className: \"FormControl\",\n      bidi: this.estimatedReadingTime,\n      placeholder: \"Reading time in seconds\",\n      type: \"number\",\n      disabled: this.autoUpdateData()\n    }), this.autoUpdateData() && m(\"div\", {\n      className: \"ManagedText\"\n    }, m(\"i\", {\n      className: \"fas fa-check\"\n    }), \" Managed\")))), m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Twitter card\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, Switch.component({\n      state: !this.enableCustomTwitter,\n      onchange: value => this.enableCustomTwitter = !value,\n      disabled: this.autoUpdateData()\n    }, \"Auto generate Twitter card\"), this.autoUpdateData() && m(\"div\", {\n      className: \"ManagedText\"\n    }, m(\"i\", {\n      className: \"fas fa-check\"\n    }), \" Managed\")))), this.enableCustomTwitter && m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Twitter title\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, m(\"input\", {\n      className: \"FormControl\",\n      bidi: this.twitterTitle,\n      placeholder: this.metaTitle(),\n      disabled: this.autoUpdateData()\n    })))), this.enableCustomTwitter && m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Twitter description\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, m(\"textarea\", {\n      className: \"FormControl\",\n      bidi: this.twitterDescription,\n      placeholder: this.description(),\n      disabled: this.autoUpdateData()\n    })))), this.enableCustomTwitter && m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Twitter image\"), m(\"div\", {\n      className: \"helpText\"\n    }, \"Displays an image on Twitter.\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, m(\"input\", {\n      className: \"FormControl\",\n      bidi: this.twitterImage,\n      placeholder: (_this$openGraphImage = this.openGraphImage()) != null ? _this$openGraphImage : \"Enter image URL\",\n      disabled: this.autoUpdateData() && this.twitterImage() === \"auto\"\n    }), this.returnFoFUploadButton(fileUrl => {\n      this.twitterImage(fileUrl);\n      this.twitterImageSource(\"fof-upload\");\n    }), this.twitterImageSource() !== \"auto\" && this.twitterImageSource() !== \"custom\" && m(\"div\", {\n      className: \"SeoItemContent-helpertext\"\n    }, \"Image source managed by \", this.twitterImageSource(), \" -\", \" \", m(\"a\", {\n      href: \"#\",\n      onclick: e => {\n        e.preventDefault();\n        this.twitterImage(null);\n        this.twitterImageSource(\"auto\");\n        this.updateHasChanges();\n      }\n    }, \"Reset image\"))))), m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Open Graph tags\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, Switch.component({\n      state: !this.enableCustomOpenGraph,\n      onchange: value => this.enableCustomOpenGraph = !value,\n      disabled: this.autoUpdateData()\n    }, \"Auto generate Open Graph tags\"), this.autoUpdateData() && m(\"div\", {\n      className: \"ManagedText\"\n    }, m(\"i\", {\n      className: \"fas fa-check\"\n    }), \" Managed\")))), this.enableCustomOpenGraph && m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Open Graph title\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, m(\"input\", {\n      className: \"FormControl\",\n      bidi: this.openGraphTitle,\n      placeholder: this.metaTitle(),\n      disabled: this.autoUpdateData()\n    })))), this.enableCustomOpenGraph && m(\"div\", {\n      className: \"SeoItemContainer\"\n    }, m(\"div\", {\n      className: \"SeoItemInfo\"\n    }, m(\"div\", {\n      class: \"SeoItemInfo-title\"\n    }, \"Open Graph description\")), m(\"div\", {\n      className: \"SeoItemContent\"\n    }, m(\"div\", {\n      className: \"ManagedContainer\"\n    }, m(\"textarea\", {\n      className: \"FormControl\",\n      bidi: this.openGraphDescription,\n      placeholder: \"Custom Twitter description\",\n      disabled: this.autoUpdateData()\n    })))))), m(\"div\", {\n      style: \"padding: 25px 30px; text-align: center;\"\n    }, this.closeInfoText && m(\"div\", {\n      style: \"margin-bottom: 15px; font-size: 12px;\"\n    }, m(\"b\", null, \"Note:\"), \" \", this.closeInfoText), this.closeDialogButton()));\n  }\n  returnFoFUploadButton(onSelect) {\n    var _flarum$extensions, _fofUpload$components, _fofUpload$components2;\n    let fofUploadButton = null;\n    const fofUpload = (_flarum$extensions = flarum.extensions) == null ? void 0 : _flarum$extensions[\"fof-upload\"];\n    const Uploader = fofUpload == null || (_fofUpload$components = fofUpload.components) == null ? void 0 : _fofUpload$components.Uploader;\n    const FileManagerModal = fofUpload == null || (_fofUpload$components2 = fofUpload.components) == null ? void 0 : _fofUpload$components2.FileManagerModal;\n    if (\"fof-upload\" in flarum.extensions && app.forum.attribute(\"fof-upload.canUpload\") && Uploader && FileManagerModal) {\n      const uploader = new Uploader();\n      fofUploadButton = m(Button, {\n        class: \"UploadButton Button\",\n        onclick: async () => {\n          app.modal.show(FileManagerModal, {\n            uploader: uploader,\n            onSelect: files => {\n              const file = app.store.getById(\"files\", files[0]);\n              onSelect(file.url());\n              this.updateHasChanges();\n            }\n          }, true);\n        }\n      }, \"Upload file\");\n    }\n    return fofUploadButton;\n  }\n  returnTag(isEnabled, enabledText, disabledText) {\n    return m(\"div\", {\n      className: clsx(\"SeoTag\", !isEnabled && \"SeoTagDisabled\")\n    }, isEnabled ? enabledText : disabledText);\n  }\n  closeDialogButton() {\n    return m(Button, {\n      type: \"submit\",\n      className: \"Button Button--primary\",\n      loading: this.loading\n    }, this.closeText);\n  }\n  updateHasChanges() {\n    this.closeText = !this.wasManaged && this.autoUpdateData() ? \"Save & auto-fill\" : \"Save\";\n\n    // Transform custom tags to managed tags\n    if (!this.wasManaged && this.autoUpdateData()) {\n      this.closeInfoText = \"This change will revert custom changes and fill the meta-tags with item-data.\";\n    }\n    this.hasChanges = true;\n  }\n  submitData() {\n    let data = {};\n    data.autoUpdateData = this.autoUpdateData();\n    data.title = this.metaTitle();\n    data.description = this.description();\n\n    // Add keywords\n    if (this.keywords() !== \"\") {\n      var _this$keywords2;\n      data.keywords = (_this$keywords2 = this.keywords()) != null ? _this$keywords2 : null;\n    }\n\n    // Add robot settings\n    data.robotsNoindex = this.robotsNoindex();\n    data.robotsNofollow = this.robotsNofollow();\n    data.robotsNoarchive = this.robotsNoarchive();\n    data.robotsNoimageindex = this.robotsNoimageindex();\n    data.robotsNosnippet = this.robotsNosnippet();\n\n    // Add Twitter info\n    if (this.twitterTitle() !== \"\") {\n      var _this$twitterTitle;\n      data.twitterTitle = (_this$twitterTitle = this.twitterTitle()) != null ? _this$twitterTitle : null;\n    }\n    if (this.twitterDescription() !== \"\") {\n      var _this$twitterDescript;\n      data.twitterDescription = (_this$twitterDescript = this.twitterDescription()) != null ? _this$twitterDescript : null;\n    }\n    if (this.twitterImage() !== \"\") {\n      data.twitterImage = this.twitterImage();\n    }\n    if (this.twitterImageSource() !== \"auto\") {\n      var _this$twitterImageSou;\n      data.twitterImageSource = (_this$twitterImageSou = this.twitterImageSource()) != null ? _this$twitterImageSou : null;\n    }\n\n    // Open graph\n    if (this.openGraphTitle() !== \"\") {\n      var _this$openGraphTitle;\n      data.openGraphTitle = (_this$openGraphTitle = this.openGraphTitle()) != null ? _this$openGraphTitle : null;\n    }\n    if (this.openGraphDescription() !== \"\") {\n      var _this$openGraphDescri;\n      data.openGraphDescription = (_this$openGraphDescri = this.openGraphDescription()) != null ? _this$openGraphDescri : null;\n    }\n    if (this.openGraphImage() !== \"\") {\n      var _this$openGraphImage2;\n      data.openGraphImage = (_this$openGraphImage2 = this.openGraphImage()) != null ? _this$openGraphImage2 : null;\n    }\n    if (this.openGraphImageSource() !== \"auto\") {\n      var _this$openGraphImageS;\n      data.openGraphImageSource = (_this$openGraphImageS = this.openGraphImageSource()) != null ? _this$openGraphImageS : null;\n    }\n    if (this.estimatedReadingTime() !== \"\") {\n      var _this$estimatedReadin;\n      data.estimatedReadingTime = (_this$estimatedReadin = this.estimatedReadingTime()) != null ? _this$estimatedReadin : null;\n    }\n    return data;\n  }\n\n  // Close or save setting\n  onsubmit(e) {\n    e.preventDefault();\n    if (!this.hasChanges) {\n      this.hide();\n      return;\n    }\n    this.loading = true;\n    this.meta.save(this.submitData()).then(() => {\n      app.alerts.show({\n        type: \"success\"\n      }, \"Saved!\");\n      this.hide();\n    }).catch(e => {\n      console.log(e);\n    }).then(() => {\n      this.saving = false;\n      m.redraw();\n    });\n  }\n  onsaved() {\n    this.hide();\n  }\n}\nflarum.reg.add('vadkuz-flarum2-seo', 'common/Components/MetaSeoModal', MetaSeoModal);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/mixin');","import Model from \"flarum/common/Model\";\nimport mixin from \"flarum/common/utils/mixin\";\nexport default class SeoMeta extends mixin(Model, {\n  // Object info\n  objectType: Model.attribute(\"objectType\"),\n  objectId: Model.attribute(\"objectId\"),\n  // Auto update data\n  autoUpdateData: Model.attribute(\"autoUpdateData\"),\n  // Default HTML Tags\n  title: Model.attribute(\"title\"),\n  description: Model.attribute(\"description\"),\n  keywords: Model.attribute(\"keywords\"),\n  // Robots\n  robotsNoindex: Model.attribute(\"robotsNoindex\"),\n  robotsNofollow: Model.attribute(\"robotsNofollow\"),\n  robotsNoarchive: Model.attribute(\"robotsNoarchive\"),\n  robotsNoimageindex: Model.attribute(\"robotsNoimageindex\"),\n  robotsNosnippet: Model.attribute(\"robotsNosnippet\"),\n  // Twitter tags\n  twitterTitle: Model.attribute(\"twitterTitle\"),\n  twitterDescription: Model.attribute(\"twitterDescription\"),\n  twitterImage: Model.attribute(\"twitterImage\"),\n  twitterImageSource: Model.attribute(\"twitterImageSource\"),\n  // Open Graph tags\n  openGraphTitle: Model.attribute(\"openGraphTitle\"),\n  openGraphDescription: Model.attribute(\"openGraphDescription\"),\n  openGraphImage: Model.attribute(\"openGraphImage\"),\n  openGraphImageSource: Model.attribute(\"openGraphImageSource\"),\n  // Extra\n  estimatedReadingTime: Model.attribute(\"estimatedReadingTime\"),\n  // Row info\n  createdAt: Model.attribute(\"createdAt\"),\n  updatedAt: Model.attribute(\"updatedAt\")\n}) {\n  apiEndpoint() {\n    return \"/seo_meta\" + (this.exists ? \"/\" + this.data.id : \"\");\n  }\n}\nflarum.reg.add('vadkuz-flarum2-seo', 'common/Models/SeoMeta', SeoMeta);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/Discussion');","import MetaSeoModal from \"./Components/MetaSeoModal\";\nexport const components = {\n  MetaSeoModal\n};","import app from \"flarum/forum/app\";\nimport DiscussionControls from \"flarum/forum/utils/DiscussionControls\";\nimport Button from \"flarum/common/components/Button\";\nimport { extend } from \"flarum/common/extend\";\nimport MetaSeoModal from \"../common/Components/MetaSeoModal\";\nimport SeoMeta from \"../common/Models/SeoMeta\";\nimport Discussion from \"flarum/common/models/Discussion\";\nimport Model from \"flarum/common/Model\";\nexport * from \"../common/extend\";\napp.initializers.add(\"vadkuz-flarum2-seo\", () => {\n  extend(DiscussionControls, \"moderationControls\", function (items, discussion) {\n    if (!app.forum.attribute(\"canConfigureSeo\")) return;\n    items.add(\"manageSeo\", Button.component({\n      icon: \"fas fa-search\",\n      onclick: () => app.modal.show(MetaSeoModal, {\n        objectType: \"discussions\",\n        objectId: discussion.id()\n      })\n    }, app.translator.trans(\"vadkuz-flarum2-seo.forum.controls.configure_seo\")), -1000);\n  });\n\n  // Register SeoMeta model\n  app.store.models.seoMeta = SeoMeta;\n\n  // Register SeoMeta relations\n  Discussion.prototype.seoMeta = Model.hasOne(\"seoMeta\");\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","_typeof","iterator","constructor","_defineProperty","e","r","t","i","toPrimitive","TypeError","String","toPropertyKey","configurable","writable","countKeywords","_keywords","keywords","split","status_ok","keyword","length","f","n","Array","isArray","add","arguments","MetaSeoModal","super","this","oninit","vnode","attrs","object","seoMeta","initialized","app","alerts","show","type","title","controls","m","class","href","target","setTimeout","hide","meta","initializeLoad","hasChanges","closeText","closeInfoText","loading","enableCustomTwitter","enableCustomOpenGraph","wasManaged","seoTagsOpened","initializeData","autoUpdateData","metaTitle","description","robotsNoindex","robotsNofollow","robotsNoarchive","robotsNoimageindex","robotsNosnippet","twitterTitle","twitterDescription","twitterImage","twitterImageSource","openGraphTitle","openGraphDescription","openGraphImage","openGraphImageSource","estimatedReadingTime","createdAt","updatedAt","className","initialLoading","store","find","concat","objectType","objectId","then","data","isLoading","redraw","content","_this$keywords","_this$openGraphImage","onkeyup","updateHasChanges","state","onchange","bidi","placeholder","disabled","returnFoFUploadButton","fileUrl","onclick","returnTag","preventDefault","style","closeDialogButton","onSelect","_flarum$extensions","_fofUpload$components","_fofUpload$components2","fofUploadButton","fofUpload","extensions","Uploader","components","FileManagerModal","forum","attribute","uploader","async","modal","files","file","getById","url","isEnabled","enabledText","disabledText","submitData","_this$keywords2","_this$twitterTitle","_this$twitterDescript","_this$twitterImageSou","_this$openGraphTitle","_this$openGraphDescri","_this$openGraphImage2","_this$openGraphImageS","_this$estimatedReadin","onsubmit","save","catch","console","log","saving","onsaved","SeoMeta","apiEndpoint","exists","id","extend","items","discussion","icon","trans","models"],"sourceRoot":""}